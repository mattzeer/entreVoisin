@{
    ViewBag.Title = "Etape 3";
    string lat = ViewBag.Lat;
    string lng = ViewBag.Lng;
}

<h2>Etape 3 - Les informations du compte</h2>
<hr />
<div class="row">
    <input  type="text" id="street_number"/>
    <input type="text" id="route" />
    <input type="text" id="locality" />
    <input type="text" id="postal_code" />
</div>


<script>
    // This example displays an address form, using the autocomplete feature
    // of the Google Places API to help users fill in the information.
    fillInAddress();
    var placeSearch, autocomplete;
    var componentForm = {
        street_number: 'short_name',
        route: 'long_name',
        locality: 'long_name',
        postal_code: 'short_name'
    };


    function initAutocomplete() {
        // Create the autocomplete object, restricting the search to geographical
        // location types.
        autocomplete = new google.maps.places.Autocomplete(
            (document.getElementById('autocomplete')),
            { types: ['geocode'] });

        // When the user selects an address from the dropdown, populate the address
        // fields in the form.
        autocomplete.addListener('place_changed', fillInAddress);
    }

    // [START region_fillform]
    function fillInAddress() {
        // Get the place details from the autocomplete object.
        var place =new google.maps.LatLng(@ViewBag.lat,@ViewBag.lng);

        document.getElementById('lat').value = place.geometry.location.lat();
        document.getElementById('long').value = place.geometry.location.lng();

        for (var component in componentForm) {
            document.getElementById(component).value = '';
        }

        // Get each component of the address from the place details
        // and fill the corresponding field on the form.


        for (var i = 0; i < place.address_components.length; i++) {

            var addressType = place.address_components[i].types[0];
            if (componentForm[addressType]) {
                var val = place.address_components[i][componentForm[addressType]];
                document.getElementById(addressType).value = val;
            }
        }

        document.getElementById('lat').value = lol;
    }
    // [END region_fillform]

   
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBffhZW6yoemiJGFZfT4joalGZQbR89kxs&signed_in=true&libraries=places" async defer></script>